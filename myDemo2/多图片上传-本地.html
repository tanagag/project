<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title></title>
	<script src="js/jquery-1.8.2.js" type="text/javascript"></script>
	<style type="text/css">

		/*上传图片样式*/
        .file-wrap{width:100px; height:100px; line-height: 100px; text-align: center;  overflow: hidden; position: relative;border:1px solid #ccc;float:left; background:#eee; }
        .file-wrap:hover{background:#ddd;}
        .file-wrap input{position: absolute;top:0;right:0;width:100px; height:100px;display: block;opacity: 0;cursor: pointer;}
        .error-info{height:100px; line-height: 100px;color:#428BCA;margin:0;padding-left:10px;display:inline-block;}
        .imgs{clear:both;}
        .block{position: relative; float: left;border:1px solid #ccc;margin:10px 20px 10px 0;padding:5px;}
        .block img{display:block;}
        .block>a{width:20px;height:20px;border-radius: 100%; text-decoration:none;background:#bbb;color:#fff;  text-align:center;position:absolute; right:-10px;top:-8px;}
	</style>
</head>
<body>
    <div class="modal-body">
        <table>
            <tbody>
                <tr>
                    <td>
                        <div class="file-wrap"><input type="file" onchange="Preview(this)"/>上传图片</div>
                        <p class="error-info" id="error">图片限于png，gif，jpeg，jpg格式！</p>
                        <div class="imgs" id="imgs"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
	    //图片上传
    	function Preview(e) {  
            $("#error").html("图片限于png，gif，jpeg，jpg格式！").css("color","");
            var ext =$(e).val().split(".")[1].toUpperCase();
            if ( ext != "PNG" && ext != "GIF" && ext != "JPG" && ext != "JPEG") {
                $("#error").html("请上传正确的图片格式png，gif，jpeg，jpg！").css("color","red");
                return false;
            }else{
                 var url= window.URL.createObjectURL($(e)[0].files[0]);
                 $("#imgs").append('<div class="block"><img src="'+url+'" width="100" height="100" /> <a href="javascript:void(0)" onclick=closeImg(this)>×</a></div>');
            }
        }
        function closeImg(obj){
           $(obj).closest(".block").remove();
        }
    </script>
</body>
</html>